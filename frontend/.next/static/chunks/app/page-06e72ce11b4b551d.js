(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8907:function(e,t,s){Promise.resolve().then(s.bind(s,1440))},1440:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(7437),r=s(2265),n=s(4829),l=s(5925),i=e=>{let{value:t,onChange:s,onLoadExample:r}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Shorthand Entry"}),(0,a.jsx)("button",{onClick:r,className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"Load Example"})]}),(0,a.jsx)("textarea",{value:t,onChange:e=>s(e.target.value),className:"w-full h-96 px-4 py-3 border border-gray-300 rounded-lg font-mono text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Enter shorthand notation here...      Example:   NHS: 234 4567 2345   HN: 31098674   NS: 25-67890   Name: Smith   Coder: CR   Consent: PISv.8   Date of biopsy: 12/07/2025   LM: CM, C2M1   Glom: 31, Gs7, Ss1_NOS   ..."}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Quick Reference:"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[{key:"Patient",hint:"NHS, HN, NS, Name, Coder, Consent, Date"},{key:"LM",hint:"Light Microscopy: CM, C2M1, etc."},{key:"Glom",hint:"Glomeruli: 31, Gs7, Ss1_NOS, Mm1, Mc1, G2, Cg1"},{key:"TI",hint:"Tubulointerstitium: ATI_micro, IFTA20, T1, etc."},{key:"Ves",hint:"Blood Vessels: A3, 2IL_1Ar, Cv2, V0, Ah1, Ptc1"},{key:"IHC",hint:"Immunohistochemistry: C4d0, SV40_0"},{key:"EM",hint:"Electron Microscopy: EM0, EM1"},{key:"IFFR",hint:"Immunofluorescence: FR_0, FR0"},{key:"CONCLUSION",hint:"BL, MVI+, MildIFTA, etc."},{key:"COMMENT",hint:"MVI+, DP, NR, etc."}].map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,a.jsxs)("span",{className:"font-semibold text-gray-900",children:[e.key,":"]})," ",(0,a.jsx)("span",{className:"text-gray-600",children:e.hint})]},e.key))})]})]})},o=e=>{let{report:t,isGenerating:s}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Generated Report"}),s&&(0,a.jsx)("span",{className:"text-sm text-blue-600 animate-pulse",children:"Generating..."})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"report-preview bg-gray-50 rounded-lg p-6 min-h-[600px] max-h-[800px] overflow-y-auto border border-gray-200",children:t?(0,a.jsx)("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap font-mono",children:t}):(0,a.jsxs)("div",{className:"text-gray-400 text-center mt-20",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("p",{className:"mt-4",children:"Report will appear here"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Enter shorthand notation to generate"})]})}),t&&(0,a.jsx)("div",{className:"absolute top-2 right-2",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Ready"})})]})]})},c=e=>{let{onCopy:t,onExportCSV:s,disabled:r}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:t,disabled:r,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[(0,a.jsx)("svg",{className:"inline-block w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy to Clipboard"]}),(0,a.jsxs)("button",{onClick:s,disabled:r,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[(0,a.jsx)("svg",{className:"inline-block w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})]}),(0,a.jsxs)("div",{className:"mt-4 text-xs text-gray-500",children:[(0,a.jsx)("p",{children:"• Copy formatted report for LIMS"}),(0,a.jsx)("p",{children:"• Export CSV for registry upload"})]})]})};let d=s(2601).env.NEXT_PUBLIC_API_URL||"http://localhost:8000";function h(){let[e,t]=(0,r.useState)("transplant"),[s,h]=(0,r.useState)(""),[x,m]=(0,r.useState)(""),[p,u]=(0,r.useState)(!1),[g,N]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!g||!s.trim())return;let e=setTimeout(()=>{b()},500);return()=>clearTimeout(e)},[s,g]);let b=(0,r.useCallback)(async()=>{if(!s.trim()){m("");return}u(!0);try{let t=await n.Z.post("".concat(d,"/api/generate"),{shorthand_text:s,report_type:e});m(t.data.report_text)}catch(e){var t,a;console.error("Error generating report:",e),l.ZP.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.detail)||"Failed to generate report")}finally{u(!1)}},[s,e]);return(0,a.jsxs)("main",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(l.x7,{position:"top-right"}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("header",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:"\uD83D\uDD2C Kidney Biopsy Report Generator"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Generate standardized kidney biopsy reports from shorthand notation"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Report Type"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"transplant",checked:"transplant"===e,onChange:e=>t(e.target.value),className:"mr-2"}),(0,a.jsx)("span",{children:"Transplant"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"native",checked:"native"===e,onChange:e=>t(e.target.value),className:"mr-2",disabled:!0}),(0,a.jsx)("span",{className:"text-gray-400",children:"Native (Coming Soon)"})]})]})]}),(0,a.jsx)(i,{value:s,onChange:h,onLoadExample:()=>{h("NHS: 234 4567 2345\nHN: 31098674\nNS: 25-67890\nName: Smith\nCoder: CR\nConsent: PISv.8\nDate of biopsy: 12/07/2025\nLM: CM, C2M1\nGlom: 31, Gs7, Ss1_NOS, Mm1, Mc1, G2, Cg1\nTI: ATI micro, IFTA20, CTCI1, T1, I1_I-IFTA3, TI2\nVes: A3, 2IL_1Ar, Cv2, Caa0, V0, Ah1, Ptc1\nIHC: C4d0, SV40_0\nEM: EM0\nIFFR: FR_0\nCONCLUSION: BL, MVI+, MildIFTA\nCOMMENT: MVI+, DP")}}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:b,disabled:p||!s.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-300",children:p?"Generating...":"Generate Report"}),(0,a.jsx)("button",{onClick:()=>{h(""),m("")},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Clear"}),(0,a.jsxs)("label",{className:"flex items-center ml-auto",children:[(0,a.jsx)("input",{type:"checkbox",checked:g,onChange:e=>N(e.target.checked),className:"mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:"Auto-generate"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(o,{report:x,isGenerating:p}),(0,a.jsx)(c,{onCopy:()=>{x&&(navigator.clipboard.writeText(x),l.ZP.success("Report copied to clipboard!"))},onExportCSV:()=>{(0,l.ZP)("CSV export coming soon!",{icon:"ℹ️"})},disabled:!x})]})]}),(0,a.jsxs)("footer",{className:"mt-12 text-center text-gray-500 text-sm",children:[(0,a.jsx)("p",{children:"Kidney Biopsy Report Generator v1.0.0"}),(0,a.jsx)("p",{children:"Designed for clinical pathologists to streamline report generation"})]})]})]})}}},function(e){e.O(0,[916,971,938,744],function(){return e(e.s=8907)}),_N_E=e.O()}]);